<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Passwort ändern</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="container">
        <h2>Passwort ändern</h2>
        <form id="change-password-form">
            <div class="form-group">
                <label for="username">Benutzername:</label>
                <input type="text" id="username" name="username" required>
            </div>
            <div class="form-group">
                <label for="old-password">Altes Passwort:</label>
                <input type="password" id="old-password" name="old-password" required>
            </div>
            <div class="form-group">
                <label for="new-password">Neues Passwort:</label>
                <input type="password" id="new-password" name="new-password" required>
            </div>
            <div class="form-group">
                <label for="confirm-password">Neues Passwort bestätigen:</label>
                <input type="password" id="confirm-password" name="confirm-password" required>
            </div>
            <button type="submit">Passwort ändern</button>
        </form>
        <p id="error-message" style="color: red;"></p>
        <p id="success-message" style="color: green;"></p>
    </div>

    <script>
    document.getElementById('change-password-form').addEventListener('submit', function(event) {
    event.preventDefault();  // Verhindert das Neuladen der Seite bei Formular-Absenden
    
    // Eingabefelder
    const username = document.getElementById('username').value;
    const oldPassword = document.getElementById('old-password').value;
    const newPassword = document.getElementById('new-password').value;
    const confirmPassword = document.getElementById('confirm-password').value;

    // Fehlernachrichtenelemente
    const errorMessage = document.getElementById('error-message');
    const successMessage = document.getElementById('success-message');

    // Validierung der Passworteingaben
    if (newPassword !== confirmPassword) {
        errorMessage.textContent = 'Die neuen Passwörter stimmen nicht überein.';
        successMessage.textContent = '';
        return;
    }

    // Optional: Du kannst hier weitere Validierungen für das Passwort einbauen (z. B. Mindestlänge)

    // Anfrage an deine API (oder Auth0) senden
    fetch('https://deine-api-url.com/ändere-passwort', {
        method: 'POST',
        headers: {
            'Content-Type': 'application/json',
            // Falls du einen Auth0 Bearer Token oder ähnliches brauchst, füg das hier hinzu
            'Authorization': 'Bearer DEIN_AUTH0_API_TOKEN'
        },
        body: JSON.stringify({
            username: username,
            oldPassword: oldPassword,
            newPassword: newPassword
        })
    })
    .then(response => response.json())
    .then(data => {
        if (data.success) {
            successMessage.textContent = 'Passwort erfolgreich geändert!';
            errorMessage.textContent = '';
        } else {
            errorMessage.textContent = 'Fehler beim Ändern des Passworts.';
            successMessage.textContent = '';
        }
    })
    .catch(error => {
        errorMessage.textContent = 'Es gab einen Fehler bei der Anfrage.';
        successMessage.textContent = '';
    });
});
</script>
</body>
</html>
